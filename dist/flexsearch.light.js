/**!
 * FlexSearch.js v0.7.0-beta (Light)
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/flexsearch
 */
(function(self){'use strict';function u(a,b){return"undefined"!==typeof a?a:b}function v(a){const b=Array(a);for(let c=0;c<a;c++)b[c]=y();return b}function y(){return Object.create(null)}function z(a,b){return b.length-a.length};const A=/[\u0300-\u036f]/g;function B(a,b){const c=Object.keys(a),d=c.length,e=[];let h="",g=0;for(let f=0,k,l;f<d;f++)k=c[f],(l=a[k])?(e[g++]=new RegExp(b?"(?!\\b)"+k+"(\\b|_)":k,"g"),e[g++]=l):h+=(h?"|":"")+k;h&&(e[g++]=new RegExp(b?"(?!\\b)("+h+")(\\b|_)":"("+h+")","g"),e[g]="");return e}function C(a,b){for(let c=0,d=b.length;c<d&&(a=a.replace(b[c],b[c+1]),a);c+=2);return a};const D=/[\W_]+/;function E(a){a.normalize&&(a=a.normalize("NFD").replace(A,""));if(a=a.toLowerCase())if(this.o&&(a=C(a,this.o)),this.A&&1<a.length&&(a=C(a,this.A)),D||""===D)if(a=a.split(D),this.filter){var b=this.filter;const c=a.length,d=[];for(let e=0,h=0;e<c;e++){const g=a[e];g&&!b[g]&&(d[h++]=g)}a=d}return a};const F={},G={};function H(a,b,c,d){var e=a.length;let h=[],g,f=0;d&&(d=[]);for(--e;0<=e;e--){const k=a[e],l=k.length,n=y();let r=!g;for(let q=0;q<l;q++){const t=k[q],m=t.length;if(m)for(let p=0,x=0,w;p<m;p++)if(w=t[p],!g)n[w]=1;else if(g[w]){if(e)d&&x<b&&((d[q]||(d[q]=[]))[x++]=w),n[w]=1;else if(c)c--;else if(h[f++]=w,f===b)return h;r=!0}}if(!r&&!d)return[];g=n}if(d)for(let k=d.length-1,l,n;0<=k;k--)if((n=(l=d[k])&&l.length)&&c&&(n<=c?(c-=n,n=0):n-=c),n){if(f+n>=b)return h.concat(l.slice(c,b-f+c));h=h.concat(c?
l.slice(c):l);f+=n;c=0}return h};G["latin:default"]=E;
function I(a,b){if(!(this instanceof I))return new I(a);let c;if(a){var d=a.charset;c=a.lang;"string"===typeof d&&(-1===d.indexOf(":")&&(d+=":default"),d=G[d]);"string"===typeof c&&(c=F[c])}else a={};let e,h,g,f=a.context||{};this.encode=a.encode||d&&d.encode||E;this.register=b||y();e=a.resolution||9;h=a.threshold||0;h>=e&&(h=e-1);this.i=e;this.s=h;this.F=b=d&&d.G||a.tokenize||"strict";this.m="strict"===b&&f.depth;this.v=u(f.bidirectional,!0);this.g=g="memory"===a.optimize;this.C=u(a.fastupdate,!0);
this.h=a.minlength||1;this.j=g?v(e-h):y();e=f.resolution||e;h=f.threshold||h;h>=e&&(h=e-1);this.l=e;this.D=h;this.B=g?v(e-h):y();this.u=d&&d.u||a.rtl;this.o=(b=a.matcher||c&&c.o)&&B(b,!1);this.A=(b=a.stemmer||c&&c.A)&&B(b,!0);if(a=b=a.filter||c&&c.filter){a=b;d=y();for(let k=0,l=a.length;k<l;k++)d[a[k]]=1;a=d}this.filter=a}I.prototype.append=function(a,b){return this.add(a,b,!0)};
I.prototype.add=function(a,b,c,d){if(!d&&!c&&this.register[a])return this.update(a,b);if(b&&(a||0===a)&&(b=this.encode(b),d=b.length)){const n=this.m,r=this.i-this.s,q=y(),t=y();for(let m=0;m<d;m++){let p=b[this.u?d-1-m:m];var e=p.length;if(p&&e>=this.h&&(n||!q[p])){var h=Math.min(this.i/d*m|0,m);if(h<r){var g="";switch(this.F){case "full":if(3<e){for(var f=0;f<e;f++){var k=f?Math.min(h/2+this.i/e*f/2|0,h+f):h;if(k<r)for(var l=e;l>f;l--)g=p.substring(f,l),g.length>=this.h&&J(this,q,g,k,a,c)}break}case "reverse":if(2<
e){for(f=e-1;0<f;f--)g=p[f]+g,g.length>=this.h&&J(this,q,g,h,a,c);g=""}case "forward":if(1<e)for(f=0;f<e;f++)g+=p[f],g.length>=this.h&&J(this,q,g,h,a,c);break;default:if(J(this,q,p,h,a,c),n&&1<d&&m<d-1)for(e=this.l-this.D,h=y(),g=p,f=Math.min(n+1,d-m),h[g]=1,k=1;k<f;k++)if((p=b[this.u?d-1-m-k:m+k])&&p.length>=this.h&&!h[p]){if(h[p]=1,l=Math.min((this.l-f)/d*m+k|0,m+(k-1)),l<e){const x=this.v&&p>g;J(this,t,x?g:p,l,a,c,x?p:g)}}else f=Math.min(f+1,d-m)}}}}this.C||(this.register[a]=1)}return this};
function J(a,b,c,d,e,h,g){let f=g?a.B:a.j;if(!b[c]||g&&!b[c][g])a.g&&(f=f[d]),g?(b=b[c]||(b[c]=y()),b[g]=1,f=f[g]||(f[g]=y())):b[c]=1,f=f[c]||(f[c]=[]),a.g||(f=f[d]||(f[d]=[])),h&&-1!==f.indexOf(e)||(f[f.length]=e,a.C&&(a=a.register[e]||(a.register[e]=[]),a[a.length]=f))}
I.prototype.search=function(a,b,c){"object"===typeof a?(c=a,a=c.query):"object"===typeof b&&(c=b);let d=[],e;var h=this.s;let g,f=0;if(c){b=c.limit;f=c.offset||0;h=u(c.threshold,h);var k=c.context;g=!1}if(a&&(a=this.encode(a),e=a.length,1<e)){c=y();var l=[];for(let r=0,q=0,t;r<e;r++)if((t=a[r])&&t.length>=this.h&&!c[t])if(this.g||g||this.j[t])l[q++]=t,c[t]=1;else return d;a=l;e=a.length}if(!e)return d;b||(b=100);c=this.i-h;h=this.l-h;k=this.m&&1<e&&!1!==k;l=0;let n;k?(n=a[0],l=1):1<e&&a.sort(z);for(let r,
q;l<e;l++){q=a[l];k?(r=K(this,d,g,h,b,f,2===e,q,n),g&&!1===r&&d.length||(n=q)):r=K(this,d,g,c,b,f,1===e,q);if(r)return r;if(g&&l===e-1){let t=d.length;if(!t){if(k){k=0;l=-1;continue}return d}if(1===t)return L(d[0],b,f)}}return H(d,b,f,g)};
function K(a,b,c,d,e,h,g,f,k){let l=[],n=k?a.B:a.j;a.g||(n=M(n,f,k,a.v));if(n){let r=0;d=Math.min(n.length,d);for(let q=0,t=0,m,p;q<d&&!(m=n[q],a.g&&(m=M(m,f,k,a.v)),m&&g&&(p=m.length,p<=h?(h-=p,m=null):h&&(m=m.slice(h),h=0)),m&&(l[r++]=m,g&&(t+=m.length,t>=e)));q++);if(r){if(g)return L(l,e,0);b[b.length]=l;return}}return!c&&l}function L(a,b,c){a=1===a.length?a[0]:[].concat.apply([],a);return c||a.length>b?a.slice(c,c+b):a}
function M(a,b,c,d){c?(d=d&&b>c,a=(a=a[d?b:c])&&a[d?c:b]):a=a[b];return a}I.prototype.contain=function(a){return!!this.register[a]};I.prototype.update=function(a,b){return this.remove(a).add(a,b)};I.prototype.remove=function(a,b){const c=this.register[a];if(c){if(this.C)for(let d=0,e;d<c.length;d++)e=c[d],e.splice(e.indexOf(a),1);else N(this.j,a,this.i-this.s,this.g),this.m&&N(this.B,a,this.l-this.D,this.g);b||delete this.register[a]}return this};
function N(a,b,c,d,e){let h=0;if(a.constructor===Array)if(e)b=a.indexOf(b),-1!==b?1<a.length&&(a.splice(b,1),h++):h++;else{e=Math.min(a.length,c);for(let g=0,f;g<e;g++)if(f=a[g])h=N(f,b,c,d,e),d||h||delete a[g]}else for(let g in a)(h=N(a[g],b,c,d,e))||delete a[g];return h};const O=self;let P;const Q={Index:I,Document:null,Worker:null,registerCharset:function(a,b){G[a]=b},registerLanguage:function(a,b){F[a]=b}};(P=O.define)&&P.amd?P([],function(){return Q}):O.exports?O.exports=Q:O.FlexSearch=Q;}(this));
